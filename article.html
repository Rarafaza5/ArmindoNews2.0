<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Armindo News — Artigo</title>
<meta name="description" content="Artigo completo da Armindo News">
<meta property="og:title" content="Armindo News">
<meta property="og:description" content="Leia esta notícia completa na Armindo News.">
<meta property="og:image" content="an.png">
<link rel="icon" type="image/x-icon" href="an.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Source+Serif+4:ital,opsz,wght@0,8..60,400;0,8..60,600;1,8..60,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<style>
:root {
    --font-sans: 'Inter', sans-serif;
    --font-serif: 'Source Serif 4', serif;
    --color-text: #1a202c;
    --color-muted: #4a5568;
    --color-primary: #1e1e1e;
    --color-accent: #c00; /* Cor de destaque (vermelho escuro) */
    --color-background: #f7fafc;
    --color-card-bg: #ffffff;
    --shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
}
body { 
    background: var(--color-background); 
    margin:0; 
    font-family: var(--font-sans); 
    color: var(--color-text); 
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
}
.reading-progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 0%;
    height: 4px;
    background: var(--color-accent);
    z-index: 2000;
    transition: width 0.1s linear;
}
header.main-header { 
    background: var(--color-card-bg); 
    padding:1rem 2rem; 
    box-shadow: var(--shadow);
    position:sticky; 
    top:0;
    z-index: 1000;
}

   @font-face {
            font-family: 'an';
            src: url('/EnglishTowne.woff') format('woff');
            font-weight: bold;
        }

.logo { 
    font-size:2.5rem; 
    font-weight:900; 
    color: var(--color-primary); 
    text-decoration:none; 
    font-family: 'an',sans-serif;
}
main { 
    max-width:1100px; 
    margin:3rem auto; 
    padding:0 1.5rem;
}
article {
    background: var(--color-card-bg); 
    border-radius:16px; 
    box-shadow: var(--shadow-lg); 
    padding: clamp(1.5rem, 5vw, 4rem); 
}
.article-header {
    text-align: center;
    border-bottom: 1px solid #e2e8f0;
    padding-bottom: 2rem;
    margin-bottom: 2rem;
}
.category-tag {
    display: inline-block;
    background: var(--color-accent);
    color: white;
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 1.5rem;
}
h1#title { 
    font-family: var(--font-sans);
    font-size:clamp(2.2rem, 5vw, 3.5rem); 
    font-weight: 800;
    line-height:1.2; 
    margin-bottom:1rem; 
}
p#summary {
    font-family: var(--font-serif);
    font-size: clamp(1.1rem, 3vw, 1.3rem);
    color: var(--color-muted);
    line-height: 1.6;
    max-width: 750px;
    margin: 0 auto 1.5rem auto;
    font-style: italic;
}
.meta-info { 
    color: var(--color-muted); 
    font-size:0.9rem; 
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem 1rem;
}
.meta-info span { display: flex; align-items: center; gap: 0.5rem; }
.meta-info .fas { font-size: 0.8rem; }
figure.media-container { margin: 2rem 0; padding: 0; }
.hero-image { width:100%; border-radius:12px; }
.video-container iframe { width:100%; height:500px; border:none; border-radius:12px; }

.executive-summary {
    background: #f7fafc;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 1.5rem 2rem;
    margin: 2.5rem auto;
    max-width: 720px;
}
.executive-summary h3 {
    font-family: var(--font-sans);
    font-size: 1.1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-top: 0;
    margin-bottom: 1rem;
}
.executive-summary ul {
    list-style: none;
    padding: 0;
    margin: 0;
}
.executive-summary li {
    font-family: var(--font-serif);
    color: var(--color-muted);
    padding-left: 1.5rem;
    position: relative;
    margin-bottom: 0.75rem;
}
.executive-summary li::before {
    content: '›';
    position: absolute;
    left: 0;
    top: -2px;
    font-size: 1.5rem;
    line-height: 1;
    color: var(--color-accent);
}

.article-body { 
    max-width:720px;
    margin: 0 auto;
    font-family: var(--font-serif);
    font-size: 1.125rem;
    line-height:1.8;
}
.article-body p:first-of-type::first-letter {
    font-family: var(--font-serif);
    color: var(--color-primary);
    font-weight: 600;
    font-size: 4.5rem;
    float: left;
    line-height: 0.8;
    padding-right: 0.75rem;
    padding-top: 0.25rem;
}
.article-body p, .article-body ul, .article-body ol { margin-bottom:1.5rem; }
.article-body h2, .article-body h3 {
    font-family: var(--font-sans);
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    line-height: 1.3;
    font-weight: 700;
}
.article-body h2 { font-size: 1.8rem; }
.article-body h3 { font-size: 1.5rem; }
.article-body blockquote {
    margin: 2.5rem 0;
    padding-left: 1.5rem;
    border-left: 3px solid var(--color-accent);
    font-style: italic;
    font-size: 1.25rem;
    color: var(--color-muted);
}
.article-footer {
    max-width: 720px;
    margin: 3rem auto 0 auto;
    padding-top: 2rem;
    border-top: 1px solid #e2e8f0;
    text-align: center;
}
.article-footer h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 1.5rem;
}
.share-buttons { display: flex; justify-content: center; gap: 1rem; }
.share-buttons a {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    color: white;
    text-decoration: none;
    font-size: 1.2rem;
    transition: transform 0.2s ease, opacity 0.2s ease;
}
.share-buttons a:hover { transform: translateY(-3px); opacity: 0.9; }
.share-whatsapp { background: #25D366; }
.share-facebook { background: #1877F2; }
.share-twitter { background: #14171A; }

.back-button { 
    display:inline-block; 
    margin-top:3rem; 
    background:var(--color-primary); 
    color:white; 
    padding:0.8rem 1.5rem; 
    border-radius:8px; 
    text-decoration:none; 
    font-weight: 500;
    transition: background-color 0.2s ease;
}
.back-button:hover { background:#333; }

@media(max-width:900px){ article{padding:1.5rem;} .video-container iframe { height:350px; } }
</style>
</head>
<body>
<div class="reading-progress-bar" id="reading-progress-bar"></div>
<header class="main-header"><a href="index.html" class="logo">AN</a></header>
<main>
  <article>
    <header class="article-header">
      <div id="category-tag" class="category-tag" style="display:none;"></div>
      <h1 id="title">Carregando...</h1>
      <p id="summary" style="display:none;"></p>
      <div class="meta-info">
        <span id="author-meta" style="display:none;"><i class="fas fa-user-edit"></i> <strong id="author-name"></strong></span>
        <span class="meta-separator" style="display:none;">•</span>
        <span id="date-meta" style="display:none;"><i class="fas fa-calendar-alt"></i> <span id="date-text"></span></span>
        <span class="meta-separator" style="display:none;">•</span>
        <span id="read-time-meta" style="display:none;"><i class="fas fa-book-open"></i> <span id="read-time-text"></span></span>
      </div>
    </header>

    <figure class="media-container">
        <div id="video-container" class="video-container" style="display:none;"></div>
        <img id="image" class="hero-image" style="display:none;">
    </figure>
    
    <div class="executive-summary" id="executive-summary" style="display:none;">
        <h3>Resumo</h3>
        <ul id="summary-points"></ul>
    </div>

    <div id="content" class="article-body"></div>

    <footer class="article-footer" id="article-footer" style="display:none;">
        <h3>Partilhar este artigo</h3>
        <div class="share-buttons">
            <a id="share-whatsapp" href="#" target="_blank" class="share-whatsapp" title="Partilhar no WhatsApp"><i class="fab fa-whatsapp"></i></a>
            <a id="share-facebook" href="#" target="_blank" class="share-facebook" title="Partilhar no Facebook"><i class="fab fa-facebook-f"></i></a>
            <a id="share-twitter" href="#" target="_blank" class="share-twitter" title="Partilhar no X (Twitter)"><i class="fa-brands fa-x-twitter"></i></a>
        </div>
    </footer>
    
    <div style="text-align: center;">
      <a href="index.html" class="back-button">← Voltar às Notícias</a>
    </div>

  </article>
</main>

<script>
const firebaseConfig = {
  apiKey: "%%GOOGLE_API%%",
  authDomain: "aawards.firebaseapp.com",
  databaseURL: "https://aawards-default-rtdb.firebaseio.com",
  projectId: "aawards",
  storageBucket: "aawards.firebasestorage.app",
  messagingSenderId: "839334918366",
  appId: "1:839334918366:web:81f2bbfc78fd85f046ea4f",
  measurementId: "G-Z9YLSTGHST"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const id = new URLSearchParams(window.location.search).get('id');
if(!id){ document.getElementById('title').innerText='Artigo não encontrado'; }

// --- Reading Progress Bar ---
const progressBar = document.getElementById('reading-progress-bar');
window.addEventListener('scroll', () => {
    const totalHeight = document.body.scrollHeight - window.innerHeight;
    const progress = (window.pageYOffset / totalHeight) * 100;
    progressBar.style.width = `${progress}%`;
});

function getYouTubeEmbed(url){
  if(!url) return null;
  try{
    const u = new URL(url);
    if(u.hostname.includes('youtu.be')) return 'https://www.youtube.com/embed/'+u.pathname.slice(1);
    if(u.hostname.includes('youtube.com')) return 'https://www.youtube.com/embed/'+u.searchParams.get('v');
    return null;
  }catch{return null;}
}

function calculateReadTime(content) {
    if (!content) return '';
    const text = content.replace(/<[^>]*>/g, '');
    const wordCount = text.split(/\s+/).filter(word => word.length > 0).length;
    const wpm = 225;
    const minutes = Math.ceil(wordCount / wpm);
    return `${minutes} min de leitura`;
}

function populateExecutiveSummary(summaryText) {
    if (!summaryText) return;
    const summaryContainer = document.getElementById('executive-summary');
    const summaryList = document.getElementById('summary-points');
    // Divide o resumo em frases. Esta regex tenta apanhar pontos finais seguidos de espaço.
    const sentences = summaryText.match(/[^.!?]+[.!?]+/g) || [summaryText];
    
    summaryList.innerHTML = ''; // Limpa a lista
    sentences.forEach(sentence => {
        const li = document.createElement('li');
        li.textContent = sentence.trim();
        summaryList.appendChild(li);
    });
    summaryContainer.style.display = 'block';
}

function setupShareLinks(url, title) {
    const encodedUrl = encodeURIComponent(url);
    const encodedTitle = encodeURIComponent(title);

    document.getElementById('share-whatsapp').href = `https://api.whatsapp.com/send?text=${encodedTitle}%20${encodedUrl}`;
    document.getElementById('share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
    document.getElementById('share-twitter').href = `https://twitter.com/intent/tweet?url=${encodedUrl}&text=${encodedTitle}`;
    document.getElementById('article-footer').style.display = 'block';
}

db.ref('articles/'+id).once('value').then(snap=>{
  const a=snap.val();
  if(!a){document.getElementById('title').innerText='Artigo não encontrado';return;}
  
  document.title=a.title+' — Armindo News';
  document.getElementById('title').innerText=a.title;

  if (a.category) {
      document.getElementById('category-tag').innerText = a.category;
      document.getElementById('category-tag').style.display = 'inline-block';
  }

  if (a.summary) {
      document.getElementById('summary').innerText = a.summary;
      document.getElementById('summary').style.display = 'block';
      populateExecutiveSummary(a.summary); // Popula o novo campo de resumo executivo
  }
  
  if (a.author) {
    document.getElementById('author-name').innerText = a.author;
    document.getElementById('author-meta').style.display = 'flex';
  }
  document.getElementById('date-text').innerText = new Date(a.date).toLocaleDateString('pt-BR', { day: 'numeric', month: 'long', year: 'numeric' });
  document.getElementById('date-meta').style.display = 'flex';

  const articleContent = a.content || a.contentText || '';
  const readTime = calculateReadTime(articleContent);
  if (readTime) {
      document.getElementById('read-time-text').innerText = readTime;
      document.getElementById('read-time-meta').style.display = 'flex';
  }

  document.querySelectorAll('.meta-separator').forEach(el => el.style.display = 'inline');

  if(a.youtubeUrl){
    const embed=getYouTubeEmbed(a.youtubeUrl);
    if(embed){
      document.getElementById('video-container').innerHTML=`<iframe src='${embed}' allowfullscreen></iframe>`;
      document.getElementById('video-container').style.display='block';
    }
  } else if(a.image){
    const img=document.getElementById('image');
    img.src=a.image;
    img.style.display='block';
  }

  if(a.image) { document.querySelector('meta[property=\'og:image\']').setAttribute('content', a.image); }
  document.querySelector('meta[property=\'og:title\']').setAttribute('content',a.title);
  document.querySelector('meta[property=\'og:description\']').setAttribute('content',a.summary||'Leia esta notícia completa na Armindo News.');

  document.getElementById('content').innerHTML = articleContent;
  setupShareLinks(window.location.href, a.title);
});
</script>
</body>
</html>